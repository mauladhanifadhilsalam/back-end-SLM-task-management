{
  "openapi": "3.0.3",
  "info": {
    "title": "SLM Project Management API",
    "version": "1.0.0",
    "description": "Role-aware REST API for authentication, user management, projects, tickets, and collaboration tools."
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "Liveness probes"
    },
    {
      "name": "Root",
      "description": "General entrypoints"
    },
    {
      "name": "Auth",
      "description": "Authentication flows"
    },
    {
      "name": "Users",
      "description": "User management"
    },
    {
      "name": "Project Owners",
      "description": "External customer contacts"
    },
    {
      "name": "Projects",
      "description": "Project lifecycle"
    },
    {
      "name": "Project Phases",
      "description": "Milestone scheduling"
    },
    {
      "name": "Project Assignments",
      "description": "Project staffing"
    },
    {
      "name": "Tickets",
      "description": "Tasks and issues"
    },
    {
      "name": "Ticket Assignees",
      "description": "Ticket assignment records"
    },
    {
      "name": "Comments",
      "description": "Ticket comments"
    },
    {
      "name": "Attachments",
      "description": "Ticket file uploads"
    },
    {
      "name": "Notifications",
      "description": "Inbox + email notifications"
    },
    {
      "name": "Activity Logs",
      "description": "Audit trail"
    }
  ],
  "security": [
    {
      "BearerAuth": []
    }
  ],
  "components": {
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "required": [
          "status",
          "timestamp"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "OK"
            ]
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "WelcomeResponse": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "ValidationError": {
        "type": "object",
        "description": "Zod formatted field errors keyed by field name.",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "_errors": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": true
        }
      },
      "MessageResponse": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "RoleType": {
        "type": "string",
        "enum": [
          "ADMIN",
          "PROJECT_MANAGER",
          "DEVELOPER"
        ]
      },
      "ProjectRoleType": {
        "type": "string",
        "enum": [
          "TECH_LEAD",
          "FRONT_END",
          "BACK_END",
          "DEVOPS",
          "CLOUD_ENGINEER"
        ]
      },
      "ProjectStatus": {
        "type": "string",
        "enum": [
          "NOT_STARTED",
          "IN_PROGRESS",
          "ON_HOLD",
          "DONE"
        ]
      },
      "TicketPriority": {
        "type": "string",
        "enum": [
          "LOW",
          "MEDIUM",
          "HIGH",
          "CRITICAL"
        ]
      },
      "TicketType": {
        "type": "string",
        "enum": [
          "ISSUE",
          "TASK"
        ]
      },
      "TicketStatus": {
        "type": "string",
        "enum": [
          "NEW",
          "IN_PROGRESS",
          "IN_REVIEW",
          "RESOLVED",
          "CLOSED",
          "TO_DO",
          "DONE"
        ]
      },
      "NotificationTargetType": {
        "type": "string",
        "enum": [
          "PROJECT",
          "TICKET",
          "COMMENT"
        ]
      },
      "NotificationState": {
        "type": "string",
        "enum": [
          "UNREAD",
          "READ"
        ]
      },
      "NotifyStatusType": {
        "type": "string",
        "enum": [
          "SENT",
          "PENDING",
          "FAILED"
        ]
      },
      "ActivityTargetType": {
        "type": "string",
        "enum": [
          "USER",
          "PROJECT",
          "TICKET",
          "COMMENT",
          "ATTACHMENT",
          "NOTIFICATION",
          "PROJECT_PHASE",
          "PROJECT_ASSIGNMENT",
          "PROJECT_OWNER"
        ]
      },
      "UserSummary": {
        "type": "object",
        "required": [
          "id",
          "fullName",
          "email"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "role": {
            "$ref": "#/components/schemas/RoleType"
          }
        }
      },
      "User": {
        "type": "object",
        "required": [
          "id",
          "fullName",
          "email",
          "role"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "role": {
            "$ref": "#/components/schemas/RoleType"
          },
          "isActive": {
            "type": "boolean"
          },
          "passwordHash": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "LoginInput": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "format": "password"
          }
        }
      },
      "AuthTokenResponse": {
        "type": "object",
        "required": [
          "token",
          "token_type",
          "expires_in",
          "role"
        ],
        "properties": {
          "token": {
            "type": "string"
          },
          "token_type": {
            "type": "string",
            "enum": [
              "Bearer"
            ]
          },
          "expires_in": {
            "type": "string"
          },
          "role": {
            "$ref": "#/components/schemas/RoleType"
          }
        }
      },
      "UserCreateInput": {
        "type": "object",
        "required": [
          "fullName",
          "email",
          "role",
          "password"
        ],
        "properties": {
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "role": {
            "type": "string",
            "enum": [
              "PROJECT_MANAGER",
              "DEVELOPER"
            ]
          },
          "password": {
            "type": "string",
            "format": "password"
          },
          "isActive": {
            "type": "boolean"
          }
        }
      },
      "UserUpdateInput": {
        "type": "object",
        "properties": {
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "role": {
            "type": "string",
            "enum": [
              "PROJECT_MANAGER",
              "DEVELOPER"
            ]
          },
          "password": {
            "type": "string",
            "format": "password"
          },
          "isActive": {
            "type": "boolean"
          }
        }
      },
      "ChangePasswordInput": {
        "type": "object",
        "required": [
          "email",
          "password",
          "newPassword"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "format": "password"
          },
          "newPassword": {
            "type": "string",
            "format": "password"
          }
        }
      },
      "ProjectOwner": {
        "type": "object",
        "required": [
          "id",
          "name",
          "email",
          "phone",
          "address"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string"
          },
          "company": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phone": {
            "type": "string"
          },
          "address": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ProjectOwnerInput": {
        "type": "object",
        "required": [
          "name",
          "company",
          "email",
          "phone",
          "address"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "company": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phone": {
            "type": "string"
          },
          "address": {
            "type": "string"
          }
        }
      },
      "ProjectPhaseSummary": {
        "type": "object",
        "required": [
          "id",
          "name",
          "startDate",
          "endDate"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string"
          },
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          }
        }
      },
      "ProjectAssignmentSummary": {
        "type": "object",
        "required": [
          "roleInProject",
          "user"
        ],
        "properties": {
          "roleInProject": {
            "$ref": "#/components/schemas/ProjectRoleType"
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          }
        }
      },
      "Project": {
        "type": "object",
        "required": [
          "id",
          "name",
          "categories",
          "ownerId",
          "startDate",
          "endDate",
          "status",
          "completion"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "ownerId": {
            "type": "integer",
            "format": "int32"
          },
          "startDate": {
            "type": "string",
            "format": "date-time"
          },
          "endDate": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "$ref": "#/components/schemas/ProjectStatus"
          },
          "completion": {
            "type": "string",
            "description": "Completion percentage stored with two decimals"
          },
          "notes": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "owner": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "format": "int32"
              },
              "name": {
                "type": "string"
              },
              "company": {
                "type": "string",
                "nullable": true
              },
              "email": {
                "type": "string",
                "format": "email"
              }
            }
          },
          "phases": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProjectPhaseSummary"
            }
          },
          "assignments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ProjectAssignmentSummary"
            }
          }
        }
      },
      "ProjectInput": {
        "type": "object",
        "required": [
          "name",
          "categories",
          "ownerId",
          "startDate",
          "endDate",
          "phases"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "minItems": 1
          },
          "ownerId": {
            "type": "integer",
            "format": "int32"
          },
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          },
          "phases": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": [
                "name",
                "startDate",
                "endDate"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "startDate": {
                  "type": "string",
                  "format": "date"
                },
                "endDate": {
                  "type": "string",
                  "format": "date"
                }
              }
            }
          },
          "assignments": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "userId",
                "roleInProject"
              ],
              "properties": {
                "userId": {
                  "type": "integer",
                  "format": "int32"
                },
                "roleInProject": {
                  "$ref": "#/components/schemas/ProjectRoleType"
                }
              }
            }
          },
          "status": {
            "$ref": "#/components/schemas/ProjectStatus"
          },
          "notes": {
            "type": "string"
          }
        }
      },
      "ProjectUpdate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "ownerId": {
            "type": "integer",
            "format": "int32"
          },
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          },
          "status": {
            "$ref": "#/components/schemas/ProjectStatus"
          },
          "notes": {
            "type": "string"
          }
        }
      },
      "ProjectPhase": {
        "type": "object",
        "required": [
          "id",
          "name",
          "startDate",
          "endDate",
          "projectId"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string"
          },
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          },
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "project": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "format": "int32"
              },
              "name": {
                "type": "string"
              },
              "status": {
                "$ref": "#/components/schemas/ProjectStatus"
              },
              "startDate": {
                "type": "string",
                "format": "date-time"
              },
              "endDate": {
                "type": "string",
                "format": "date-time"
              }
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ProjectPhaseInput": {
        "type": "object",
        "required": [
          "name",
          "projectId",
          "startDate",
          "endDate"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          }
        }
      },
      "ProjectAssignment": {
        "type": "object",
        "required": [
          "id",
          "projectId",
          "userId",
          "roleInProject"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32"
          },
          "roleInProject": {
            "$ref": "#/components/schemas/ProjectRoleType"
          },
          "assignedAt": {
            "type": "string",
            "format": "date-time"
          },
          "project": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "format": "int32"
              },
              "name": {
                "type": "string"
              },
              "status": {
                "$ref": "#/components/schemas/ProjectStatus"
              },
              "startDate": {
                "type": "string",
                "format": "date-time"
              },
              "endDate": {
                "type": "string",
                "format": "date-time"
              }
            }
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          }
        }
      },
      "ProjectAssignmentInput": {
        "type": "object",
        "required": [
          "projectId",
          "userId",
          "roleInProject"
        ],
        "properties": {
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32"
          },
          "roleInProject": {
            "$ref": "#/components/schemas/ProjectRoleType"
          }
        }
      },
      "TicketProject": {
        "type": "object",
        "required": [
          "id",
          "name",
          "status",
          "startDate",
          "endDate",
          "assignments"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/ProjectStatus"
          },
          "startDate": {
            "type": "string",
            "format": "date-time"
          },
          "endDate": {
            "type": "string",
            "format": "date-time"
          },
          "assignments": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "userId"
              ],
              "properties": {
                "userId": {
                  "type": "integer",
                  "format": "int32"
                }
              }
            }
          }
        }
      },
      "TicketAssigneePivot": {
        "type": "object",
        "required": [
          "id",
          "assignedAt",
          "user"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "assignedAt": {
            "type": "string",
            "format": "date-time"
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          }
        }
      },
      "Ticket": {
        "type": "object",
        "required": [
          "id",
          "projectId",
          "type",
          "title",
          "priority",
          "status",
          "requesterId",
          "createdAt",
          "updatedAt"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "type": {
            "$ref": "#/components/schemas/TicketType"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "priority": {
            "$ref": "#/components/schemas/TicketPriority"
          },
          "status": {
            "$ref": "#/components/schemas/TicketStatus"
          },
          "requesterId": {
            "type": "integer",
            "format": "int32"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "dueDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "project": {
            "$ref": "#/components/schemas/TicketProject"
          },
          "requester": {
            "$ref": "#/components/schemas/UserSummary"
          },
          "assignees": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TicketAssigneePivot"
            }
          }
        }
      },
      "TicketCreateInput": {
        "type": "object",
        "required": [
          "projectId",
          "type",
          "title",
          "priority"
        ],
        "properties": {
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "requesterId": {
            "type": "integer",
            "format": "int32"
          },
          "type": {
            "$ref": "#/components/schemas/TicketType"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "priority": {
            "$ref": "#/components/schemas/TicketPriority"
          },
          "status": {
            "$ref": "#/components/schemas/TicketStatus"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "dueDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "assigneeIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32"
            }
          }
        }
      },
      "TicketUpdateInput": {
        "type": "object",
        "properties": {
          "projectId": {
            "type": "integer",
            "format": "int32"
          },
          "requesterId": {
            "type": "integer",
            "format": "int32"
          },
          "type": {
            "$ref": "#/components/schemas/TicketType"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "priority": {
            "$ref": "#/components/schemas/TicketPriority"
          },
          "status": {
            "$ref": "#/components/schemas/TicketStatus"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "dueDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "assigneeIds": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int32"
            }
          }
        }
      },
      "TicketAssignee": {
        "type": "object",
        "required": [
          "id",
          "ticketId",
          "userId",
          "assignedAt"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "ticketId": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32"
          },
          "assignedAt": {
            "type": "string",
            "format": "date-time"
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          },
          "ticket": {
            "type": "object",
            "properties": {
              "id": {
                "type": "integer",
                "format": "int32"
              },
              "title": {
                "type": "string"
              },
              "type": {
                "$ref": "#/components/schemas/TicketType"
              },
              "status": {
                "$ref": "#/components/schemas/TicketStatus"
              },
              "priority": {
                "$ref": "#/components/schemas/TicketPriority"
              },
              "projectId": {
                "type": "integer",
                "format": "int32"
              }
            }
          }
        }
      },
      "TicketAssigneeInput": {
        "type": "object",
        "required": [
          "ticketId",
          "userId"
        ],
        "properties": {
          "ticketId": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "Comment": {
        "type": "object",
        "required": [
          "id",
          "ticketId",
          "userId",
          "message",
          "createdAt"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "ticketId": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          },
          "ticket": {
            "$ref": "#/components/schemas/Ticket"
          }
        }
      },
      "CommentCreateInput": {
        "type": "object",
        "required": [
          "ticketId",
          "message"
        ],
        "properties": {
          "ticketId": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "CommentUpdateInput": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "Attachment": {
        "type": "object",
        "required": [
          "id",
          "ticketId",
          "userId",
          "fileName",
          "filePath",
          "fileSize",
          "mimeType",
          "createdAt"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "ticketId": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32"
          },
          "fileName": {
            "type": "string"
          },
          "filePath": {
            "type": "string"
          },
          "fileSize": {
            "type": "integer",
            "format": "int64"
          },
          "mimeType": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AttachmentWithBase64": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Attachment"
          },
          {
            "type": "object",
            "properties": {
              "base64": {
                "type": "string",
                "description": "Base64 encoded file contents"
              }
            }
          }
        ]
      },
      "Notification": {
        "type": "object",
        "required": [
          "id",
          "recipientId",
          "targetType",
          "message",
          "state",
          "createdAt"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "recipientId": {
            "type": "integer",
            "format": "int32"
          },
          "targetType": {
            "$ref": "#/components/schemas/NotificationTargetType"
          },
          "targetId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "message": {
            "type": "string"
          },
          "subject": {
            "type": "string",
            "nullable": true
          },
          "emailText": {
            "type": "string",
            "nullable": true
          },
          "emailFrom": {
            "type": "string",
            "nullable": true
          },
          "emailReplyTo": {
            "type": "string",
            "nullable": true
          },
          "state": {
            "$ref": "#/components/schemas/NotificationState"
          },
          "readAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/NotifyStatusType"
          },
          "sentAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "emailError": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "recipient": {
            "$ref": "#/components/schemas/UserSummary"
          }
        }
      },
      "NotificationCreateInput": {
        "type": "object",
        "required": [
          "recipientId",
          "targetType",
          "message"
        ],
        "properties": {
          "recipientId": {
            "type": "integer",
            "format": "int32"
          },
          "targetType": {
            "$ref": "#/components/schemas/NotificationTargetType"
          },
          "targetId": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          },
          "subject": {
            "type": "string"
          },
          "emailText": {
            "type": "string"
          },
          "emailFrom": {
            "type": "string"
          },
          "emailReplyTo": {
            "type": "string",
            "format": "email"
          },
          "state": {
            "$ref": "#/components/schemas/NotificationState"
          },
          "readAt": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "$ref": "#/components/schemas/NotifyStatusType"
          },
          "sentAt": {
            "type": "string",
            "format": "date-time"
          },
          "emailError": {
            "type": "string"
          }
        }
      },
      "NotificationUpdateInput": {
        "type": "object",
        "properties": {
          "recipientId": {
            "type": "integer",
            "format": "int32"
          },
          "targetType": {
            "$ref": "#/components/schemas/NotificationTargetType"
          },
          "targetId": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          },
          "subject": {
            "type": "string"
          },
          "emailText": {
            "type": "string"
          },
          "emailFrom": {
            "type": "string"
          },
          "emailReplyTo": {
            "type": "string",
            "format": "email"
          },
          "state": {
            "$ref": "#/components/schemas/NotificationState"
          },
          "readAt": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "$ref": "#/components/schemas/NotifyStatusType"
          },
          "sentAt": {
            "type": "string",
            "format": "date-time"
          },
          "emailError": {
            "type": "string"
          }
        }
      },
      "NotificationStatePatch": {
        "type": "object",
        "required": [
          "state"
        ],
        "properties": {
          "state": {
            "$ref": "#/components/schemas/NotificationState"
          }
        }
      },
      "NotificationResendInput": {
        "type": "object",
        "properties": {
          "subject": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "from": {
            "type": "string"
          },
          "replyTo": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "ActivityLog": {
        "type": "object",
        "required": [
          "id",
          "action",
          "targetType",
          "targetId",
          "occurredAt"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "userId": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "action": {
            "type": "string"
          },
          "targetType": {
            "$ref": "#/components/schemas/ActivityTargetType"
          },
          "targetId": {
            "type": "integer",
            "format": "int32"
          },
          "details": {
            "type": "object",
            "additionalProperties": true
          },
          "occurredAt": {
            "type": "string",
            "format": "date-time"
          },
          "user": {
            "$ref": "#/components/schemas/UserSummary"
          }
        }
      },
      "ActivityLogList": {
        "type": "object",
        "required": [
          "items",
          "total",
          "page",
          "pageSize",
          "totalPages"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ActivityLog"
            }
          },
          "total": {
            "type": "integer",
            "format": "int32"
          },
          "page": {
            "type": "integer",
            "format": "int32"
          },
          "pageSize": {
            "type": "integer",
            "format": "int32"
          },
          "totalPages": {
            "type": "integer",
            "format": "int32"
          }
        }
      }
    },
    "responses": {
      "UnauthorizedError": {
        "description": "Authentication required or token invalid",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "default": {
                "value": {
                  "message": "Authentication required"
                }
              }
            }
          }
        }
      },
      "ForbiddenError": {
        "description": "Authenticated user lacks required role or ownership",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "default": {
                "value": {
                  "message": "Insufficient permissions"
                }
              }
            }
          }
        }
      },
      "NotFoundError": {
        "description": "Requested resource does not exist",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "default": {
                "value": {
                  "message": "Record not found"
                }
              }
            }
          }
        }
      },
      "ConflictError": {
        "description": "Resource already exists or violates a unique constraint",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "default": {
                "value": {
                  "message": "Email already used"
                }
              }
            }
          }
        }
      },
      "ValidationErrorResponse": {
        "description": "Supplied input failed validation",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "examples": {
              "default": {
                "value": {
                  "email": {
                    "_errors": [
                      "Invalid email"
                    ]
                  },
                  "_errors": []
                }
              }
            }
          }
        }
      },
      "ServerError": {
        "description": "Unexpected error on the server",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "default": {
                "value": {
                  "message": "Internal server error"
                }
              }
            }
          }
        }
      },
      "UnprocessableEntity": {
        "description": "Request conflicts with notification state",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "default": {
                "value": {
                  "message": "Subject is missing for this notification. Provide `subject` in the request body to resend."
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Check service status",
        "operationId": "getHealth",
        "security": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "status": "OK",
                      "timestamp": "2025-02-02T10:15:00.000Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "Root"
        ],
        "summary": "Welcome message",
        "operationId": "getRoot",
        "responses": {
          "200": {
            "description": "Authenticated welcome message",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WelcomeResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Welcome to SLM Project Management API"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Authenticate user credentials",
        "operationId": "postAuthLogin",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Credentials are valid and a JWT is returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthTokenResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "description": "Invalid email or password",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Invalid credentials"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/profile": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Retrieve the authenticated user profile",
        "operationId": "getAuthProfile",
        "responses": {
          "200": {
            "description": "Authenticated user info",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "description": "Token subject no longer exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "User not found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/change-password": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Change a password (self-service)",
        "operationId": "postUsersChangePassword",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Password changed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "User not found"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "New password matches existing hash",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "New password cannot be the same as the old one"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "List project managers and developers",
        "description": "Requires ADMIN or PROJECT_MANAGER role.",
        "operationId": "getUsers",
        "responses": {
          "200": {
            "description": "Users filtered to PM/Developer roles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/User"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search by full name or email."
          },
          {
            "name": "role",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/RoleType"
            },
            "description": "Filter by user role."
          },
          {
            "name": "isActive",
            "in": "query",
            "schema": {
              "type": "boolean"
            },
            "description": "Filter by active/inactive users."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort users by."
          }
        ]
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Create a user",
        "description": "ADMIN only.",
        "operationId": "postUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreateInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      }
    },
    "/users/{id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Retrieve a user",
        "operationId": "getUserById",
        "responses": {
          "200": {
            "description": "User record",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Update a user",
        "operationId": "patchUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Delete a user",
        "operationId": "deleteUser",
        "responses": {
          "200": {
            "description": "User deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "User deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          },
          "description": "User identifier"
        }
      ]
    },
    "/project-owners": {
      "get": {
        "tags": [
          "Project Owners"
        ],
        "summary": "List project owners",
        "operationId": "getProjectOwners",
        "responses": {
          "200": {
            "description": "Array of project owners",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectOwner"
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "company",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by company name."
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search by owner name or email."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort project owners by."
          }
        ]
      },
      "post": {
        "tags": [
          "Project Owners"
        ],
        "summary": "Create project owner",
        "operationId": "postProjectOwner",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectOwnerInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Project owner created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectOwner"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      }
    },
    "/project-owners/{id}": {
      "get": {
        "tags": [
          "Project Owners"
        ],
        "summary": "Retrieve project owner",
        "operationId": "getProjectOwner",
        "responses": {
          "200": {
            "description": "Owner found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectOwner"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "patch": {
        "tags": [
          "Project Owners"
        ],
        "summary": "Update project owner",
        "operationId": "patchProjectOwner",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectOwnerInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Owner updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectOwner"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      },
      "delete": {
        "tags": [
          "Project Owners"
        ],
        "summary": "Delete project owner",
        "operationId": "deleteProjectOwner",
        "responses": {
          "200": {
            "description": "Owner deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Project owner deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/projects": {
      "get": {
        "tags": [
          "Projects"
        ],
        "summary": "List projects visible to the viewer",
        "operationId": "getProjects",
        "responses": {
          "200": {
            "description": "Projects filtered by assignment unless viewer is privileged",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Project"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/ProjectStatus"
            },
            "description": "Filter by project status."
          },
          {
            "name": "ownerId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Filter by project owner id."
          },
          {
            "name": "assignedUserId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Projects where this user is assigned."
          },
          {
            "name": "category",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Match one of the project categories."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort projects by."
          }
        ]
      },
      "post": {
        "tags": [
          "Projects"
        ],
        "summary": "Create project",
        "description": "Requires ADMIN or PROJECT_MANAGER role.",
        "operationId": "postProject",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Project created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Project"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/projects/{id}": {
      "get": {
        "tags": [
          "Projects"
        ],
        "summary": "Retrieve project",
        "operationId": "getProject",
        "responses": {
          "200": {
            "description": "Project details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Project"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "patch": {
        "tags": [
          "Projects"
        ],
        "summary": "Update project",
        "operationId": "patchProject",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Project"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "tags": [
          "Projects"
        ],
        "summary": "Delete project",
        "operationId": "deleteProject",
        "responses": {
          "200": {
            "description": "Project deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Project deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/project-phases": {
      "get": {
        "tags": [
          "Project Phases"
        ],
        "summary": "List project phases",
        "operationId": "getProjectPhases",
        "parameters": [
          {
            "name": "projectId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Optional project filter"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "startAfter",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Only phases starting on or after this date."
          },
          {
            "name": "endBefore",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Only phases ending on or before this date."
          },
          {
            "name": "activeOnly",
            "in": "query",
            "schema": {
              "type": "boolean"
            },
            "description": "If true, only phases active today."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort phases by."
          }
        ],
        "responses": {
          "200": {
            "description": "Phases sorted by start date",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectPhase"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid projectId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": [
          "Project Phases"
        ],
        "summary": "Create phase",
        "operationId": "postProjectPhase",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectPhaseInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Phase created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectPhase"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/project-phases/{id}": {
      "get": {
        "tags": [
          "Project Phases"
        ],
        "summary": "Retrieve phase",
        "operationId": "getProjectPhase",
        "responses": {
          "200": {
            "description": "Phase details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectPhase"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "patch": {
        "tags": [
          "Project Phases"
        ],
        "summary": "Update phase",
        "operationId": "patchProjectPhase",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectPhaseInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Phase updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectPhase"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "tags": [
          "Project Phases"
        ],
        "summary": "Delete phase",
        "operationId": "deleteProjectPhase",
        "responses": {
          "200": {
            "description": "Phase deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Project phase deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/project-assignments": {
      "get": {
        "tags": [
          "Project Assignments"
        ],
        "summary": "List project assignments",
        "operationId": "getProjectAssignments",
        "parameters": [
          {
            "name": "projectId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Restrict to a project (required unless ADMIN)"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "userId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Filter by assigned user id."
          },
          {
            "name": "roleInProject",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/ProjectRoleType"
            },
            "description": "Filter by project role."
          },
          {
            "name": "assignedFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Assignments on or after this date."
          },
          {
            "name": "assignedTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Assignments on or before this date."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort assignments by."
          }
        ],
        "responses": {
          "200": {
            "description": "Assignments ordered by recency",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectAssignment"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "post": {
        "tags": [
          "Project Assignments"
        ],
        "summary": "Add project assignment",
        "operationId": "postProjectAssignment",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectAssignmentInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Assignment created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectAssignment"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      }
    },
    "/project-assignments/{id}": {
      "delete": {
        "tags": [
          "Project Assignments"
        ],
        "summary": "Remove assignment",
        "operationId": "deleteProjectAssignment",
        "responses": {
          "200": {
            "description": "Assignment removed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Project assignment removed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/tickets": {
      "get": {
        "tags": [
          "Tickets"
        ],
        "summary": "List tickets with filters",
        "operationId": "getTickets",
        "parameters": [
          {
            "name": "projectId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "requesterId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/TicketStatus"
            }
          },
          {
            "name": "priority",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/TicketPriority"
            }
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/TicketType"
            }
          },
          {
            "name": "assigneeId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Case-insensitive match on title/description"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "dueFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Only tickets due on or after this date."
          },
          {
            "name": "dueTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Only tickets due on or before this date."
          },
          {
            "name": "updatedSince",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Tickets updated on or after this date."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort tickets by."
          }
        ],
        "responses": {
          "200": {
            "description": "Visible tickets filtered by permissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Ticket"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "Tickets"
        ],
        "summary": "Create ticket",
        "operationId": "postTicket",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TicketCreateInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Ticket"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      }
    },
    "/tickets/{id}": {
      "get": {
        "tags": [
          "Tickets"
        ],
        "summary": "Retrieve ticket",
        "operationId": "getTicket",
        "responses": {
          "200": {
            "description": "Ticket details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Ticket"
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "patch": {
        "tags": [
          "Tickets"
        ],
        "summary": "Update ticket",
        "operationId": "patchTicket",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TicketUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Ticket"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "tags": [
          "Tickets"
        ],
        "summary": "Delete ticket",
        "operationId": "deleteTicket",
        "responses": {
          "200": {
            "description": "Ticket deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Ticket deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/ticket-assignees": {
      "get": {
        "tags": [
          "Ticket Assignees"
        ],
        "summary": "List ticket assignees",
        "operationId": "getTicketAssignees",
        "parameters": [
          {
            "name": "ticketId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Ticket filter (required for non-admins)"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "userId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Filter by assignee user id."
          },
          {
            "name": "assignedFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Assignments on or after this date."
          },
          {
            "name": "assignedTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Assignments on or before this date."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort ticket assignees by."
          }
        ],
        "responses": {
          "200": {
            "description": "Assignment rows",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TicketAssignee"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "post": {
        "tags": [
          "Ticket Assignees"
        ],
        "summary": "Add ticket assignee",
        "operationId": "postTicketAssignee",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TicketAssigneeInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Assignee added",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketAssignee"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          }
        }
      }
    },
    "/ticket-assignees/{id}": {
      "delete": {
        "tags": [
          "Ticket Assignees"
        ],
        "summary": "Remove ticket assignee",
        "operationId": "deleteTicketAssignee",
        "responses": {
          "200": {
            "description": "Assignee removed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Assignee removed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/comments": {
      "get": {
        "tags": [
          "Comments"
        ],
        "summary": "List comments",
        "operationId": "getComments",
        "parameters": [
          {
            "name": "ticketId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Optional ticket filter"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "authorId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Filter by comment author user id."
          },
          {
            "name": "createdFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Comments created on or after this date."
          },
          {
            "name": "createdTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Comments created on or before this date."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort comments by."
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket comments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Comment"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "Comments"
        ],
        "summary": "Create comment",
        "operationId": "postComment",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CommentCreateInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Comment created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Comment"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/comments/{id}": {
      "get": {
        "tags": [
          "Comments"
        ],
        "summary": "Retrieve comment",
        "operationId": "getComment",
        "responses": {
          "200": {
            "description": "Comment details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Comment"
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "patch": {
        "tags": [
          "Comments"
        ],
        "summary": "Update comment",
        "operationId": "patchComment",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CommentUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comment updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Comment"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "tags": [
          "Comments"
        ],
        "summary": "Delete comment",
        "operationId": "deleteComment",
        "responses": {
          "200": {
            "description": "Comment deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Comment deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/attachments": {
      "get": {
        "tags": [
          "Attachments"
        ],
        "summary": "List attachments",
        "operationId": "getAttachments",
        "parameters": [
          {
            "name": "ticketId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Optional for admins; required otherwise"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "userId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "description": "Filter by uploading user id."
          },
          {
            "name": "uploadedFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Attachments uploaded on or after this date."
          },
          {
            "name": "uploadedTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Attachments uploaded on or before this date."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort attachments by."
          }
        ],
        "responses": {
          "200": {
            "description": "Attachments with base64 payloads",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AttachmentWithBase64"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "post": {
        "tags": [
          "Attachments"
        ],
        "summary": "Upload attachment",
        "operationId": "postAttachment",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "ticketId",
                  "file"
                ],
                "properties": {
                  "ticketId": {
                    "type": "string",
                    "description": "Ticket identifier"
                  },
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Attachment metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Attachment"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/attachments/{id}": {
      "delete": {
        "tags": [
          "Attachments"
        ],
        "summary": "Delete attachment",
        "operationId": "deleteAttachment",
        "responses": {
          "200": {
            "description": "Attachment deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Attachment deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/notifications": {
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "List notifications",
        "operationId": "getNotifications",
        "parameters": [
          {
            "name": "recipientId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "targetType",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/NotificationTargetType"
            }
          },
          {
            "name": "targetId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "state",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/NotificationState"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            },
            "description": "Page index (1-based)."
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            },
            "description": "Number of items per page."
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/NotifyStatusType"
            },
            "description": "Filter by delivery status."
          },
          {
            "name": "sentFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Notifications sent on or after this date."
          },
          {
            "name": "sentTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Notifications sent on or before this date."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort notifications by."
          }
        ],
        "responses": {
          "200": {
            "description": "Notifications visible to the viewer",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Notification"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "Notifications"
        ],
        "summary": "Create notification",
        "description": "ADMIN only.",
        "operationId": "postNotification",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationCreateInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Notification created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Notification"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/notifications/{id}": {
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "Retrieve notification",
        "operationId": "getNotification",
        "responses": {
          "200": {
            "description": "Notification details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Notification"
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "patch": {
        "tags": [
          "Notifications"
        ],
        "summary": "Update notification",
        "description": "ADMIN only.",
        "operationId": "patchNotification",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Notification updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Notification"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "tags": [
          "Notifications"
        ],
        "summary": "Delete notification",
        "description": "ADMIN only.",
        "operationId": "deleteNotification",
        "responses": {
          "200": {
            "description": "Notification deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Notification deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/notifications/{id}/state": {
      "patch": {
        "tags": [
          "Notifications"
        ],
        "summary": "Update notification state",
        "operationId": "patchNotificationState",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationStatePatch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "State updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Notification"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/notifications/{id}/resend": {
      "post": {
        "tags": [
          "Notifications"
        ],
        "summary": "Resend failed email",
        "description": "ADMIN only; only failed SMTP notifications are eligible.",
        "operationId": "postNotificationResend",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationResendInput"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Resend accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Notification"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/activity-logs": {
      "get": {
        "tags": [
          "Activity Logs"
        ],
        "summary": "List activity logs",
        "operationId": "getActivityLogs",
        "parameters": [
          {
            "name": "targetType",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/ActivityTargetType"
            }
          },
          {
            "name": "targetId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "userId",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "action",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "maximum": 100
            }
          },
          {
            "name": "from",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "to",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            },
            "description": "Sort direction."
          },
          {
            "name": "sortBy",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Field to sort activity logs by."
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated logs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActivityLogList"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          }
        }
      },
      "delete": {
        "tags": [
          "Activity Logs"
        ],
        "summary": "Bulk delete activity logs",
        "operationId": "deleteActivityLogs",
        "parameters": [
          {
            "name": "olderThan",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "targetType",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/ActivityTargetType"
            },
            "description": "Provide at least one filter"
          }
        ],
        "responses": {
          "200": {
            "description": "Bulk delete result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "deletedCount": {
                      "type": "integer",
                      "format": "int32"
                    }
                  }
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Activity logs deleted successfully",
                      "deletedCount": 12
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationErrorResponse"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          }
        }
      }
    },
    "/activity-logs/{id}": {
      "get": {
        "tags": [
          "Activity Logs"
        ],
        "summary": "Retrieve activity log",
        "operationId": "getActivityLog",
        "responses": {
          "200": {
            "description": "Activity log",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ActivityLog"
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "delete": {
        "tags": [
          "Activity Logs"
        ],
        "summary": "Delete activity log",
        "operationId": "deleteActivityLog",
        "responses": {
          "200": {
            "description": "Log deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "examples": {
                  "default": {
                    "value": {
                      "message": "Activity log deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int32"
          }
        }
      ]
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Issue a new access token",
        "description": "Reads the refresh token from the HTTP-only cookie issued during login to return a new access token.",
        "operationId": "postAuthRefresh",
        "security": [],
        "responses": {
          "200": {
            "description": "New access token issued",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthTokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Refresh token missing, revoked, or expired",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "missing": {
                    "value": {
                      "message": "Refresh token missing"
                    }
                  },
                  "invalid": {
                    "value": {
                      "message": "Invalid or expired refresh token"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Revoke the current refresh token",
        "description": "Deletes the stored refresh token (if present) and clears the HTTP-only cookie.",
        "operationId": "postAuthLogout",
        "security": [],
        "responses": {
          "204": {
            "description": "Refresh token cleared"
          }
        }
      }
    }
  }
}